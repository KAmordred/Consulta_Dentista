{% extends 'Plantilla_base.html' %}

{% load static %}

{% block title %}insumos{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/styleinsumos.css' %}">
{% endblock %}

{% block content %}
    <!-- Contenido principal -->
    <div class="insumos-page">
        <div class="container-lg">
            <!-- Aquí va el contenido de la página principal -->
            <div class="contenedor-principal">
                <div class="contenedor-productos">
                    <!-- PRODUCTOS QUE SE VEN EN MI PAGINA -->
                </div>
                <div class="contenedor-carrito">
                    <h2>Carrito de Compras</h2>
                    <ul id="lista-carrito"></ul>
                    <p id="total">Total: $0</p>
                    <button class="boton-pagar" onclick="simularPago()">Pagar Total</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Script de Bootstrap JS al final del cuerpo -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Archivo JavaScript personalizado -->
    <script src="{% static 'js/js-insumos.js' %}"></script>

    <!-- Verificación de autenticación del usuario y ajuste del contenido -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const userAuthenticated = "{{ user.is_authenticated }}";

            if (userAuthenticated === 'True') {
                // Usuario autenticado: permitir funcionalidad completa
                crearTarjetas(); // Crear las tarjetas de productos al cargar la página
            } else {
                // Usuario no autenticado: mostrar mensaje de inicio de sesión
                const contenedorProductos = document.querySelector(".contenedor-productos");
                contenedorProductos.innerHTML = '<p>Por favor, inicia sesión para comprar productos.</p>';
            }
        });

    //Condición de Autenticación: Utilizamos {{ user.is_authenticated }} de Django para verificar si el usuario está autenticado.
 
    //Si el usuario está autenticado, se llama a la función crearTarjetas() para generar las tarjetas de productos.
    //Si el usuario no está autenticado, se muestra un mensaje indicando que debe iniciar sesión comprar productos.    
    </script>
{% endblock %}
